---
title: 指数定投交易策略
author: shixiongfei
date: 2021-10-15 17:25:49
categories: 投资理财
tags: [投资理财, 基金投资, 量化交易]
---

## 交易框架

指数基金为投资标的

动态仓位管理

止盈不止损

投资目标赚取市场平均收益

## 数据计算

### 巴菲特指数

计算方法：国家股市总市值 / 国民生产总值(GDP)

主要用途：评估整体股市的热度

- `> 100% 表示股市过热`
- `< 50% 表示股市被低估`
- `70% ~ 80% 左右是合理估值`

1889年日本牛市巅峰时，巴菲特指标达到146%

2000年英国牛市巅峰时，巴菲特指标达到188%

2000年法国牛市巅峰时，巴菲特指标达到103%

2007年韩国牛市巅峰时，巴菲特指标达到107%

2007年中国A股牛市巅峰时，巴菲特指标达到136%

2015年中国A股牛市巅峰时，巴菲特指标达到122%

### 指数四分位

计算方法：取至少过去10年的平均市盈率，并计算四分位(n+1法)

主要用途：估计标的指数的估值水平

- 根据四分位计算出市盈率的5个值，分别是最低，1/4位, 1/2位, 3/4位，最高
- 低于1/4位为低估
- 高于3/4位为高估

#### 四分位计算公式有2种，假定有n个数已由小到大排列好

n + 1 方法

- Q1 = (n + 1) / 4
- Q2 = (2 * (n + 1)) / 4 = (n + 1) / 2
- Q3 = (3 * (n + 1) / 4

n - 1 方法

- Q1 = 1 + ((n - 1) / 4)
- Q2 = 1 + ((2 * (n - 1)) / 4) = 1 + ((n - 1) / 2)
- Q3 = 1 + (3 * (n - 1)) / 4

### 指数偏离度

计算公式：((T-1时收盘价 / T日时N天平均线) - 1) * 100%

- N天平均线取240（一年）
- 均线一般选择有180天、250天、500天等

主要用途：计算网格区间

- 按5%一档计算网格

定投金额计算：实际扣款金额 = 基础金额 \* (1 + 档位参数 \* 级差)

- 级差可以设为：10%, 20%, 30%
- 分别对应180天，250天，500天均线

### 指数盈利收益率(E/P)

计算方法：指数PE的倒数（对于股票来说是公司盈利 / 公司市值）

- 例如市盈率是8，那盈利收益率就是12.5%

主要用途：辅助计算指数投资价值

- 盈利收益率>10%时，分批投资
- 盈利收益率<10%，>6.4%，坚定持有已买入的份额
- < 6.4%时，分批卖出

实际定投金额 = 预期定投金额 * (当月盈利收益率 / 首次盈利收益率)

## 仓位管理

默认50%中性仓位

仓位最大值90%

仓位最小值10%

巴菲特指数进入低估阶段时，仓位+10%

指数分位低于1/4时，仓位+10%

指数偏离度每向下偏离5%，仓位+5%

指数盈利收益率>10%，仓位+5%

巴菲特指数由高估回归到合理区间时，仓位+10%

指数分位由高估回归到合理区间时，仓位+10%

巴菲特指数由低估回归到合理区间时，仓位-10%

指数分位由低估回归到合理区间时，仓位-10%

巴菲特指数进入高估阶段，仓位-10%

指数分位高于3/4时，仓位-10%

指数偏离度每向上偏离5%，仓位-5%

指数盈利收益率<6.4%，仓位-10%

## 交易策略

采用动态仓位，周定投策略

遇到节假日则跳过当期策略

每周三上午9点整计算整体仓位比例变化，确定目标仓位比例

10点整计算账户盈亏情况，确定与目标市值的差额

卖出或买入差额部分，如果差额 < 5% 则忽略

每日下午2点整，结余资金全部买入国债逆回购
