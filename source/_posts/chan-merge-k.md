---
title: 缠论中的K线合并处理
author: shixiongfei
date: 2022-04-30 14:07:47
categories: 投资理财
tags: [投资理财, 缠中说缠, 量化交易]
---

## K线包含关系确认

一根K线的高低点全在另一根K线的范围里。因为时间不可逆，所以包含顺序必须是由左向右。

```text
  1    2
       +
  +    |
  |   +++
 +++  | |
 | |  | |
 +++  | |
  |   +++
  +    |
       +
```

```text
  1    2
  +
  |    +
 +++   |
 | |  +++
 | |  | |
 | |  +++
 +++   |
  |    +
  +
```

## 方向判定

- 将存在包含关系的两根 K 线左边的一根设为第 n 根 K 线
- n 的左边设为 n-1 根 K 线
- n 的右边设为 n+1 根 K 线
- 根据它们的位置关系，当 gn > gn-1 时，K 线向上；当 dn < dn-1 时，则 K 线向下
- 如果没有 n-1 根 K 线，则 n 为阳线方向取向上，n 为阴线方向取向下

## K线方向向上处理

1. 取第 n 根和第 n+1 根的高点中最大值为新 K 线的高点
2. 取第 n 根和第 n+1 根的低点中最大值为新 K 线的低点
3. n 的开盘为新 K 线的开盘
4. n+1 的收盘为新 K 线的收盘
5. 如果 n+1 的最低点大于 n 的开盘价，那么新 K 线取最低价开盘

## K线方向向下处理

1. 取第 n 根和第 n+1 根的高点中最小值为新 K 线的高点
2. 取第 n 根和第 n+1 根的低点中最小值为新 K 线的低点
3. n 的开盘为新 K 线的开盘
4. n+1 的收盘为新 K 线的收盘
5. 如果 n+1 的最高点小于 n 的开盘价，那么新 K 线取最高价开盘
